#! /usr/bin/env bash

diff /dev/stdin <(printf "\0\0T\0E\0ST\0\0" | ./debug/relay | head -n 30) <<EOF
gpio_init(25)
gpio_init(0)
gpio_set_dir(25,1)
gpio_set_dir(0,0)
gpio_get(0) (==0)
gpio_put(25,0)
sleep_ms(100)
gpio_get(0) (==0)
gpio_put(25,0)
sleep_ms(100)
gpio_get(0) (==84)
gpio_put(25,1)
sleep_ms(100)
gpio_get(0) (==0)
gpio_put(25,0)
sleep_ms(100)
gpio_get(0) (==69)
gpio_put(25,1)
sleep_ms(100)
gpio_get(0) (==0)
gpio_put(25,0)
sleep_ms(100)
gpio_get(0) (==83)
gpio_put(25,1)
sleep_ms(100)
gpio_get(0) (==84)
gpio_put(25,1)
sleep_ms(100)
gpio_get(0) (==0)
gpio_put(25,0)
EOF
